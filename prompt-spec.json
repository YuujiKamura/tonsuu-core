{
  "version": "2.1.0",
  "materials": {
    "土砂": { "density": 1.8 },
    "As殻": { "density": 2.5 },
    "Co殻": { "density": 2.5 },
    "開粒度As殻": { "density": 2.35 },
    "切削ガラ": { "density": 2.45 }
  },
  "truckSpecs": {
    "2t":  { "bedLength": 3.0, "bedWidth": 1.6, "bedHeight": 0.32, "levelVolume": 1.5, "heapVolume": 2.0, "maxCapacity": 2.0 },
    "4t":  { "bedLength": 3.4, "bedWidth": 2.06, "bedHeight": 0.32, "levelVolume": 2.2, "heapVolume": 2.9, "maxCapacity": 4.0 },
    "増トン": { "bedLength": 4.0, "bedWidth": 2.2, "bedHeight": 0.40, "levelVolume": 3.5, "heapVolume": 4.6, "maxCapacity": 6.5 },
    "10t": { "bedLength": 5.3, "bedWidth": 2.3, "bedHeight": 0.50, "levelVolume": 6.0, "heapVolume": 7.8, "maxCapacity": 10.0 }
  },
  "geometryPrompt": "Output ONLY JSON: {\"plateBox\":[x1,y1,x2,y2], \"tailgateTopY\": 0.0, \"tailgateBottomY\": 0.0, \"cargoTopY\": 0.0} This is a rear view of a dump truck carrying construction debris. plateBox = bounding box of the rear license plate (normalized 0-1, [left,top,right,bottom]). tailgateTopY = Y coordinate (normalized 0-1) of the TOP edge of the tailgate (後板上端/rim). tailgateBottomY = Y coordinate (normalized 0-1) of the BOTTOM edge of the tailgate (後板下端). cargoTopY = Y coordinate (normalized 0-1) of the HIGHEST point of the cargo mound. This is NOT the cargo surface near the tailgate — it is the absolute highest pixel of any cargo visible in the image. Cargo often extends well above the tailgate rim. Scan the entire image top-to-bottom to find the highest cargo pixel. The tailgate is the flat metal panel at the rear of the truck bed. tailgateTopY < tailgateBottomY < plateBox[3] (top has smaller Y). cargoTopY < tailgateTopY if cargo is heaped above the rim (common). cargoTopY > tailgateTopY only if cargo is below the rim (rare, nearly empty). All coordinates normalized 0.0-1.0.",
  "fillPrompt": "Output ONLY JSON: {\"fillRatioL\": 0.0, \"fillRatioW\": 0.0, \"taperRatio\": 0.0, \"packingDensity\": 0.0, \"materialType\": \"?\", \"reasoning\": \"...\"} This is a rear view of a dump truck carrying construction debris. First, identify the material: materialType: one of \"As殻\" (chunky broken asphalt slabs, rough/angular surface, ~5cm thick pieces), \"切削ガラ\" (milled asphalt, fine granular like coarse sand/gravel, smooth surface forming a clean mound), \"Co殻\" (concrete chunks, gray/white), \"土砂\" (soil/dirt, brown). Then estimate the TOP surface and slope: fillRatioL (0.3~0.9): fraction of bed LENGTH covered by cargo AT THE TOP (peak/ridge). From a rear view, the bed length is NOT visible. If you cannot clearly determine fillRatioL, set it to 0.8. fillRatioW (0.7~0.9): fraction of bed WIDTH covered by cargo at ~90% of peak height (slightly below the very top). Visible from rear view — how wide is the mound at 90% height compared to the bed width. 0.8~0.9 = nearly flat top. 0.7~0.8 = moderate mound. taperRatio (0.5~1.0): front-loading factor. How uniformly the cargo fills the bed from FRONT to BACK. KEY QUESTION: Is the cargo front-loaded (前積み) or evenly distributed? FROM REAR VIEW: Look at the コボレーン (spill guard frames) above the side panels. If コボレーン is prominently visible, the cargo at the REAR is lower than the peak — this means front-loaded (cargo piled toward the front, thinner at the back). VISUAL GUIDE: コボレーン barely visible (cargo nearly level with frame top) → 0.9~1.0 (evenly distributed along full bed). コボレーン 20~40% exposed → 0.75~0.85 (slightly front-loaded). コボレーン ~50% exposed → 0.6~0.75 (clearly front-loaded, rear half significantly lower). コボレーン >50% exposed → 0.5~0.6 (heavily front-loaded, rear area nearly empty). CRITICAL: If コボレーン is half-visible or more, the cargo is front-loaded and taper MUST be ≤0.7. packingDensity (0.7~0.95): how tightly packed the material is. As殻 (asphalt pavement slabs, ~5cm thick chunks): loosely thrown = 0.7-0.75, moderate = 0.75-0.85, tightly packed = 0.85-0.9. 切削ガラ (milled asphalt, fine granular like coarse gravel): packs very tightly with minimal voids = 0.85-0.95. If the cargo surface looks smooth/granular rather than chunky, it is likely 切削ガラ → use higher packing.",
  "multiParamPrompt": {
    "promptFormat": "Output ONLY JSON: {jsonTemplate} Adjust each value based on the image: {rangeGuide}",
    "jsonTemplate": {
      "isTargetDetected": true,
      "truckType": "?",
      "licensePlate": null,
      "materialType": "As殻",
      "height": 0,
      "packingDensity": 0,
      "fillRatioL": 0,
      "fillRatioW": 0,
      "fillRatioZ": 0,
      "confidenceScore": 0,
      "reasoning": "describe what you see"
    },
    "rangeGuide": "height(0.0~0.6, 0.05m刻みで推定せよ。後板(テールゲート上縁)=0.30m, ヒンジ金具=0.60m。荷山の最高点がどちらの目印の何cm上/下かを見て数値化せよ) fillRatioL(0.0~0.9, 長さ方向の充填率: ガラは安息角があり荷台端まで満杯にならないため上限0.9) fillRatioW(0.0~0.9, 上面の充填率: 荷台上面のどれくらいを荷山が覆っているか) fillRatioZ(0.75~1.0, 高さ方向の充填率: 荷台をカチッと満載した錐台形状を1.0とし、実際の山がそこからどれだけ欠けているか。4tダンプで錐台に近い=1.0付近→4t超、山が崩れて少ない=0.7~0.8→3.5t未満。※積載量が少ない場合はZを下げるのではなくheightを下げよ。Zはheightで表される山の「形の崩れ具合」を補正する係数) packingDensity(0.5~0.9, As殻=アスファルト舗装版(厚さ約5cm)の破砕物。表面の見た目で判断せよ: 表面がゴツゴツして破片同士の隙間が目立つ=0.5付近、普通の積載=0.7付近、表面が平坦で隙間が少なく整然としている=0.9付近。破片サイズが大きいほど・雑に投げ込むほど空隙が増え値が下がる) ※fillRatioL/W/Zはそれぞれ独立して推定すること ※materialTypeはAs殻固定、変更不要"
  },
  "ranges": {
    "height": { "min": 0.0, "max": 0.8, "step": 0.05, "calibration": { "後板": 0.30, "ヒンジ": 0.60 } },
    "fillRatioL": { "min": 0.3, "max": 0.9 },
    "fillRatioW": { "min": 0.7, "max": 0.9 },
    "taperRatio": { "min": 0.5, "max": 1.0 },
    "packingDensity": { "min": 0.7, "max": 0.95 },
    "fillRatioZ": { "min": 0.75, "max": 1.0 }
  },
  "constants": {
    "PLATE_HEIGHT_M": 0.22,
    "PLATE_MIN_NORM": 0.03,
    "BOTTOM_FILL": 0.9,
    "COMPRESSION_REF_VOLUME": 2.0,
    "COMPRESSION_FACTOR": 0.15,
    "EFFECTIVE_PACKING_MIN": 0.7,
    "EFFECTIVE_PACKING_MAX": 0.95
  }
}
